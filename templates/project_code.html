{% extends "base.html" %}

{% block title %}{{ project.title }} - Codice - Il Mio Portfolio{% endblock %}

{% block content %}
<!-- Project Code Hero -->
<section class="section" style="padding-top: 120px;">
    <div class="container">
        <div class="text-center">
            <h1>{{ project.title }}</h1>
            <p class="lead">Visualizzazione del codice del progetto</p>
            <div class="project-meta">
                <span class="badge badge-primary">{{ project.category|title }}</span>
                {% for tech in project.get_technologies_list() %}
                <span class="badge badge-secondary">{{ tech }}</span>
                {% endfor %}
            </div>
        </div>
    </div>
</section>

<!-- Project Description -->
<section class="section">
    <div class="container">
        <div class="row">
            <div class="col-md-8 mx-auto">
                <div class="card">
                    <div class="card-body">
                        <h3>Descrizione del Progetto</h3>
                        <p>{{ project.description }}</p>
                        
                        {% if project.github_repo %}
                        <div class="mt-3">
                            <a href="{{ project.github_repo }}" class="btn btn-primary" target="_blank">
                                <i class="fab fa-github"></i> Vedi Repository Completo
                            </a>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Code Preview Section -->
<section class="section" style="background-color: var(--bg-dark);">
    <div class="container">
        <div class="row">
            <div class="col-md-8 mx-auto">
                <div class="code-preview">
                    <div class="code-header">
                        <h3><i class="fas fa-code"></i> Anteprima del Codice</h3>
                        <p>Ecco alcuni file chiave del progetto per mostrare l'architettura e le funzionalità principali.</p>
                    </div>
                    
                    {% if code_files %}
                        {% for filename, file_data in code_files.items() %}
                        <div class="code-file">
                            <div class="file-header">
                                <span class="file-name">{{ filename }}</span>
                                <span class="file-type">{{ file_data.language|title }}</span>
                            </div>
                            <div class="code-content">
                                <pre><code class="language-{{ file_data.language }}">{{ file_data.content }}</code></pre>
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <!-- Fallback se non ci sono file di codice -->
                        <div class="code-file">
                            <div class="file-header">
                                <span class="file-name">README.md</span>
                                <span class="file-type">Markdown</span>
                            </div>
                            <div class="code-content">
                                <pre><code class="language-markdown"># {{ project.title }}

{{ project.description }}

## Repository

Questo progetto è disponibile su GitHub: [{{ project.github_repo }}]({{ project.github_repo }})

## Tecnologie Utilizzate

{% for tech in project.get_technologies_list() %}
- {{ tech }}
{% endfor %}

## Come Contribuire

1. Fai un fork del repository
2. Crea un branch per la tua feature
3. Committa le tue modifiche
4. Pusha al branch
5. Apri una Pull Request

## Licenza

Questo progetto è sotto licenza MIT.</code></pre>
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Back to Projects -->
<section class="section">
    <div class="container text-center">
        <a href="{{ url_for('projects') }}" class="btn btn-outline">
            <i class="fas fa-arrow-left"></i> Torna ai Progetti
        </a>
    </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
{% endblock %} 